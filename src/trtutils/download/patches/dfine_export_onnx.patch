--- D-FINE/tools/deployment/export_onnx.py	2025-09-26 22:27:14.753349744 -0700
+++ D-FINE/tools/deployment/export_onnx_fix.py	2025-09-26 22:28:24.368619480 -0700
@@ -55,8 +55,8 @@
 
     model = Model()
 
-    data = torch.rand(32, 3, 640, 640)
-    size = torch.tensor([[640, 640]])
+    data = torch.rand(1, 3, args.imgsz, args.imgsz)
+    size = torch.tensor([[args.imgsz, args.imgsz]])
     _ = model(data, size)
 
     dynamic_axes = {
@@ -75,7 +75,7 @@
         input_names=["images", "orig_target_sizes"],
         output_names=["labels", "boxes", "scores"],
         dynamic_axes=dynamic_axes,
-        opset_version=16,
+        opset_version=args.opset,
         verbose=False,
         do_constant_folding=True,
     )
@@ -124,5 +124,15 @@
         action="store_true",
         default=True,
     )
+    parser.add_argument(
+        "--imgsz",
+        type=int,
+        default=640,
+    )
+    parser.add_argument(
+        "--opset",
+        type=int,
+        default=17,
+    )
     args = parser.parse_args()
     main(args)
